function loadDataImage(e,t){var n=new PNGReader(e);n.parse(function(e,n){if(e)throw e;console.log(n);drawOnCanvas(n,t)})}var drawOnCanvas=function(e,t){console.log(t.toString());var n=e.width;var r=e.height;var i=t.createImageData(n,r);var s=0;var o=Math.min(e.width,n);var u=Math.min(e.height,r);for(var a=0;a<u;a++){for(var f=0;f<o;f++){var l=e.getPixel(f,a);i.data[s++]=l[0];i.data[s++]=l[1];i.data[s++]=l[2];i.data[s++]=l[3]}var c=n-o;if(c>0)s+=c*4}t.putImageData(i,0,0)};(function(e){var t={},n=function(r){var i=t[r];if(!i){i=t[r]={};var s=i.exports={};e[r].call(s,n,i,s,window)}return i.exports};window["PNGReader"]=n("0")})({0:function(e,t,n,r){"use strict";function l(e,t){if(e.length!=t.length)return false;for(var n=e.length;n--;)if(e[n]!=t[n])return false;return true}function c(e,t){return(e[t]<<24)+(e[t+1]<<16)+(e[t+2]<<8)+(e[t+3]<<0)}function h(e,t){return(e[t+1]<<8)+(e[t]<<0)}function p(e,t){return e[t]<<0}function d(e){var t="";for(var n=0;n<e.length;n++){t+=String.fromCharCode(e[n])}return t}var i=e("1");var s=typeof process!=="undefined"&&!process.browser;var o=function(){if(s){var t=null;return function(e,n){return t.inflate(new Buffer(e),n)}}else{var n=e("2");return function(e,t){e=new n.FlateStream(new n.Stream(e));t(null,e.getBytes())}}}();var u=s?Buffer:function(){if(typeof ArrayBuffer=="function"){return function(e){return new Uint8Array(new ArrayBuffer(e))}}else{return function(e){return new Array(e)}}}();var a=Array.prototype.slice;var f=Object.prototype.toString;var v=function(e){if(typeof e=="string"){var t=e;e=new Array(t.length);for(var n=0,r=t.length;n<r;n++){e[n]=t[n].charCodeAt(0)}}else{var s=f.call(e).slice(8,-1);if(s=="ArrayBuffer")e=new Uint8Array(e)}this.i=0;this.bytes=e;this.png=new i;this.dataChunks=[]};v.prototype.readBytes=function(e){var t=this.i+e;if(t>this.bytes.length){throw new Error("Unexpectedly reached end of file")}var n=a.call(this.bytes,this.i,t);this.i=t;return n};v.prototype.decodeHeader=function(){if(this.i!==0){throw new Error("file pointer should be at 0 to read the header")}var e=this.readBytes(8);this.header=e};v.prototype.decodeChunk=function(){var e=c(this.readBytes(4),0);if(e<0){throw new Error("Bad chunk length "+(4294967295&e))}var t=d(this.readBytes(4));var n=this.readBytes(e);var r=this.readBytes(4);console.log("type :"+t);switch(t){case"IHDR":this.decodeIHDR(n);break;case"PLTE":this.decodePLTE(n);break;case"IDAT":this.decodeIDAT(n);break;case"IEND":this.decodeIEND(n);break}return t};v.prototype.decodeIHDR=function(e){var t=this.png;t.setWidth(c(e,0));t.setHeight(c(e,4));t.setBitDepth(p(e,8));t.setColorType(p(e,9));t.setCompressionMethod(p(e,10));t.setFilterMethod(p(e,11));t.setInterlaceMethod(p(e,12))};v.prototype.decodePLTE=function(e){this.png.setPalette(e)};v.prototype.decodeIDAT=function(e){this.dataChunks.push(e)};v.prototype.decodeIEND=function(){};v.prototype.decodePixels=function(e){var t=this.png;var n=this;var r=0;var i,s,a,f;for(f=this.dataChunks.length;f--;)r+=this.dataChunks[f].length;var l=new u(r);for(i=0,a=0,f=this.dataChunks.length;i<f;i++){var c=this.dataChunks[i];for(s=0;s<c.length;s++)l[a++]=c[s]}o(l,function(r,i){if(r)return e(r);try{if(t.getInterlaceMethod()===0){n.interlaceNone(i)}else{n.interlaceAdam7(i)}}catch(s){return e(s)}e()})};v.prototype.interlaceNone=function(e){var t=this.png;var n=Math.max(1,t.colors*t.bitDepth/8);var r=n*t.width;var i=new u(n*t.width*t.height);var s;var o=0;for(var f=0;f<e.length;f+=r+1){s=a.call(e,f+1,f+r+1);switch(p(e,f)){case 0:this.unFilterNone(s,i,n,o,r);break;case 1:this.unFilterSub(s,i,n,o,r);break;case 2:this.unFilterUp(s,i,n,o,r);break;case 3:this.unFilterAverage(s,i,n,o,r);break;case 4:this.unFilterPaeth(s,i,n,o,r);break;default:throw new Error("unkown filtered scanline")}o+=r}t.pixels=i};v.prototype.interlaceAdam7=function(e){throw new Error("Adam7 interlacing is not implemented yet")};v.prototype.unFilterNone=function(e,t,n,r,i){for(var s=0,o=i;s<o;s++){t[r+s]=e[s]}};v.prototype.unFilterSub=function(e,t,n,r,i){var s=0;for(;s<n;s++)t[r+s]=e[s];for(;s<i;s++){t[r+s]=e[s]+t[r+s-n]&255}};v.prototype.unFilterUp=function(e,t,n,r,i){var s=0,o,u;if(r-i<0)for(;s<i;s++){t[r+s]=e[s]}else for(;s<i;s++){o=e[s];u=t[r+s-i];t[r+s]=o+u&255}};v.prototype.unFilterAverage=function(e,t,n,r,i){var s=0,o,u,a;if(r-i<0){for(;s<n;s++){t[r+s]=e[s]}for(;s<i;s++){t[r+s]=e[s]+(t[r+s-n]>>1)&255}}else{for(;s<n;s++){t[r+s]=e[s]+(t[r-i+s]>>1)&255}for(;s<i;s++){o=e[s];u=t[r+s-n];a=t[r+s-i];t[r+s]=o+(u+a>>1)&255}}};v.prototype.unFilterPaeth=function(e,t,n,r,i){var s=0,o,u,a,f,l,c,h,p,d;if(r-i<0){for(;s<n;s++){t[r+s]=e[s]}for(;s<i;s++){t[r+s]=e[s]+t[r+s-n]&255}}else{for(;s<n;s++){t[r+s]=e[s]+t[r+s-i]&255}for(;s<i;s++){o=e[s];u=t[r+s-n];a=t[r+s-i];f=t[r+s-i-n];l=u+a-f;c=Math.abs(l-u);h=Math.abs(l-a);p=Math.abs(l-f);if(c<=h&&c<=p)d=u;else if(h<=p)d=a;else d=f;t[r+s]=o+d&255}}};v.prototype.parse=function(e,t){if(typeof e=="function")t=e;if(typeof e!="object")e={};try{this.decodeHeader();while(this.i<this.bytes.length){var n=this.decodeChunk();if(n=="IHDR"&&e.data===false||n=="IEND")break}var r=this.png;this.decodePixels(function(e){t(e,r)})}catch(i){t(i)}};t.exports=v},1:function(e,t,n,r){"use strict";var i=function(){this.width=0;this.height=0;this.bitDepth=0;this.colorType=0;this.compressionMethod=0;this.filterMethod=0;this.interlaceMethod=0;this.colors=0;this.alpha=false;this.pixelBits=0;this.palette=null;this.pixels=null};i.prototype.getWidth=function(){return this.width};i.prototype.setWidth=function(e){this.width=e};i.prototype.getHeight=function(){return this.height};i.prototype.setHeight=function(e){this.height=e};i.prototype.getBitDepth=function(){return this.bitDepth};i.prototype.setBitDepth=function(e){if([2,4,8,16].indexOf(e)===-1){throw new Error("invalid bith depth "+e)}this.bitDepth=e};i.prototype.getColorType=function(){return this.colorType};i.prototype.setColorType=function(e){var t=0,n=false;switch(e){case 0:t=1;break;case 2:t=3;break;case 3:t=1;break;case 4:t=2;n=true;break;case 6:t=4;n=true;break;default:throw new Error("invalid color type")}this.colors=t;this.alpha=n;this.colorType=e};i.prototype.getCompressionMethod=function(){return this.compressionMethod};i.prototype.setCompressionMethod=function(e){if(e!==0){throw new Error("invalid compression method "+e)}this.compressionMethod=e};i.prototype.getFilterMethod=function(){return this.filterMethod};i.prototype.setFilterMethod=function(e){if(e!==0){throw new Error("invalid filter method "+e)}this.filterMethod=e};i.prototype.getInterlaceMethod=function(){return this.interlaceMethod};i.prototype.setInterlaceMethod=function(e){if(e!==0&&e!==1){throw new Error("invalid interlace method "+e)}this.interlaceMethod=e};i.prototype.setPalette=function(e){if(e.length%3!==0){throw new Error("incorrect PLTE chunk length")}if(e.length>Math.pow(2,this.bitDepth)*3){throw new Error("palette has more colors than 2^bitdepth")}this.palette=e};i.prototype.getPalette=function(){return this.palette};i.prototype.getPixel=function(e,t){if(!this.pixels)throw new Error("pixel data is empty");if(e>=this.width||t>=this.height){throw new Error("x,y position out of bound")}var n=this.colors*this.bitDepth/8*(t*this.width+e);var r=this.pixels;switch(this.colorType){case 0:return[r[n],r[n],r[n],255];case 2:return[r[n],r[n+1],r[n+2],255];case 3:return[this.palette[r[n]*3+0],this.palette[r[n]*3+1],this.palette[r[n]*3+2],255];case 4:return[r[n],r[n],r[n],r[n+1]];case 6:return[r[n],r[n+1],r[n+2],r[n+3]]}};t.exports=i},2:function(e,t,n,r){"use strict";var i=function(){function t(e,t,n,r){this.bytes=new Uint8Array(e);this.start=t||0;this.pos=this.start;this.end=t+n||this.bytes.length;this.dict=r}t.prototype={get length(){return this.end-this.start},getByte:function(){if(this.pos>=this.end)return null;return this.bytes[this.pos++]},getBytes:function(t){var n=this.bytes;var r=this.pos;var i=this.end;if(!t)return n.subarray(r,i);var s=r+t;if(s>i)s=i;this.pos=s;return n.subarray(r,s)},lookChar:function(){if(this.pos>=this.end)return null;return String.fromCharCode(this.bytes[this.pos])},getChar:function(){if(this.pos>=this.end)return null;return String.fromCharCode(this.bytes[this.pos++])},skip:function(t){if(!t)t=1;this.pos+=t},reset:function(){this.pos=this.start},moveStart:function(){this.start=this.pos},makeSubStream:function(n,r,i){return new t(this.bytes.buffer,n,r,i)},isStream:true};return t}();var s=function(){function t(){this.pos=0;this.bufferLength=0;this.eof=false;this.buffer=null}t.prototype={ensureBuffer:function(t){var n=this.buffer;var r=n?n.byteLength:0;if(t<r)return n;var i=512;while(i<t)i<<=1;var s=new Uint8Array(i);for(var o=0;o<r;++o)s[o]=n[o];return this.buffer=s},getByte:function(){var t=this.pos;while(this.bufferLength<=t){if(this.eof)return null;this.readBlock()}return this.buffer[this.pos++]},getBytes:function(t){var n,r=this.pos;if(t){this.ensureBuffer(r+t);n=r+t;while(!this.eof&&this.bufferLength<n)this.readBlock();var i=this.bufferLength;if(n>i)n=i}else{while(!this.eof)this.readBlock();n=this.bufferLength;if(!n)this.buffer=new Uint8Array(0)}this.pos=n;return this.buffer.subarray(r,n)},lookChar:function(){var t=this.pos;while(this.bufferLength<=t){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos])},getChar:function(){var t=this.pos;while(this.bufferLength<=t){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos++])},makeSubStream:function(t,n,r){var s=t+n;while(this.bufferLength<=s&&!this.eof)this.readBlock();return new i(this.buffer,t,n,r)},skip:function(t){if(!t)t=1;this.pos+=t},reset:function(){this.pos=0}};return t}();var o=function(){function u(e){var t=e.getBytes();var n=0;this.dict=e.dict;var r=t[n++];var i=t[n++];if(r==-1||i==-1)error("Invalid header in flate stream: "+r+", "+i);if((r&15)!=8)error("Unknown compression method in flate stream: "+r+", "+i);if(((r<<8)+i)%31!=0)error("Bad FCHECK in flate stream: "+r+", "+i);if(i&32)error("FDICT bit set in flate stream: "+r+", "+i);this.bytes=t;this.bytesPos=n;this.codeSize=0;this.codeBuf=0;s.call(this)}var t=new Uint32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);var n=new Uint32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]);var r=new Uint32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]);var i=[new Uint32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59e4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9];var o=[new Uint32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5];u.prototype=Object.create(s.prototype);u.prototype.getBits=function(t){var n=this.codeSize;var r=this.codeBuf;var i=this.bytes;var s=this.bytesPos;var o;while(n<t){if(typeof (o=i[s++])=="undefined")error("Bad encoding in flate stream");r|=o<<n;n+=8}o=r&(1<<t)-1;this.codeBuf=r>>t;this.codeSize=n-=t;this.bytesPos=s;return o};u.prototype.getCode=function(t){var n=t[0];var r=t[1];var i=this.codeSize;var s=this.codeBuf;var o=this.bytes;var u=this.bytesPos;while(i<r){var a;if(typeof (a=o[u++])=="undefined")error("Bad encoding in flate stream");s|=a<<i;i+=8}var f=n[s&(1<<r)-1];var l=f>>16;var c=f&65535;if(i==0||i<l||l==0)error("Bad encoding in flate stream");this.codeBuf=s>>l;this.codeSize=i-l;this.bytesPos=u;return c};u.prototype.generateHuffmanTable=function(t){var n=t.length;var r=0;for(var i=0;i<n;++i){if(t[i]>r)r=t[i]}var s=1<<r;var o=new Uint32Array(s);for(var u=1,a=0,f=2;u<=r;++u,a<<=1,f<<=1){for(var l=0;l<n;++l){if(t[l]==u){var c=0;var h=a;for(var i=0;i<u;++i){c=c<<1|h&1;h>>=1}for(var i=c;i<s;i+=f)o[i]=u<<16|l;++a}}}return[o,r]};u.prototype.readBlock=function(){var s=this.getBits(3);if(s&1)this.eof=true;s>>=1;if(s==0){var u=this.bytes;var a=this.bytesPos;var f;if(typeof (f=u[a++])=="undefined")error("Bad block header in flate stream");var l=f;if(typeof (f=u[a++])=="undefined")error("Bad block header in flate stream");l|=f<<8;if(typeof (f=u[a++])=="undefined")error("Bad block header in flate stream");var c=f;if(typeof (f=u[a++])=="undefined")error("Bad block header in flate stream");c|=f<<8;if(c!=(~l&65535))error("Bad uncompressed block length in flate stream");this.codeBuf=0;this.codeSize=0;var h=this.bufferLength;var p=this.ensureBuffer(h+l);var d=h+l;this.bufferLength=d;for(var v=h;v<d;++v){if(typeof (f=u[a++])=="undefined"){this.eof=true;break}p[v]=f}this.bytesPos=a;return}var m;var g;if(s==1){m=i;g=o}else if(s==2){var y=this.getBits(5)+257;var b=this.getBits(5)+1;var w=this.getBits(4)+4;var E=new Uint8Array(t.length);for(var S=0;S<w;++S)E[t[S]]=this.getBits(3);var x=this.generateHuffmanTable(E);var T=0;var S=0;var N=y+b;var C=new Uint8Array(N);while(S<N){var k=this.getCode(x);if(k==16){var L=2,A=3,O=T}else if(k==17){var L=3,A=3,O=T=0}else if(k==18){var L=7,A=11,O=T=0}else{C[S++]=T=k;continue}var M=this.getBits(L)+A;while(M-->0)C[S++]=O}m=this.generateHuffmanTable(C.subarray(0,y));g=this.generateHuffmanTable(C.subarray(y,N))}else{error("Unknown block type in flate stream")}var p=this.buffer;var _=p?p.length:0;var D=this.bufferLength;while(true){var P=this.getCode(m);if(P<256){if(D+1>=_){p=this.ensureBuffer(D+1);_=p.length}p[D++]=P;continue}if(P==256){this.bufferLength=D;return}P-=257;P=n[P];var H=P>>16;if(H>0)H=this.getBits(H);var T=(P&65535)+H;P=this.getCode(g);P=r[P];H=P>>16;if(H>0)H=this.getBits(H);var B=(P&65535)+H;if(D+T>=_){p=this.ensureBuffer(D+T);_=p.length}for(var j=0;j<T;++j,++D)p[D]=p[D-B]}};return u}();n.Stream=i;n.FlateStream=o}})